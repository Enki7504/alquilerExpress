{% extends 'detalle/detalle_base.html' %}
{% load static %}

{% block title %}Detalle del Inmueble - {{ inmueble.nombre }}{% endblock %}

{% block detalle_extra_css %}
  <!-- CSS específico para inmuebles -->
  <style>
    .img-carrusel-inmueble {
      height: 500px;
      object-fit: cover;
    }
  </style>
{% endblock %}

{% block content %}
  {% with objeto=inmueble tipo="inmueble" imagen_default="img/default-property-large.jpg" %}
    {{ block.super }}
  {% endwith %}
{% endblock %}

{% block detalles_especificos %}
  <div class="d-flex align-items-center">
    <i class="bi bi-door-open text-primary me-2"></i>
    <span>{{ objeto.cantidad_ambientes }} ambientes</span>
  </div>
  <div class="d-flex align-items-center">
    <i class="bi bi-bootstrap text-primary me-2"></i>
    <span>{{ objeto.cantidad_banios }} baño{{ objeto.cantidad_banios|pluralize }}</span>
  </div>
  <div class="d-flex align-items-center">
    <i class="bi bi-c-square text-primary me-2"></i>
    <span>{{ objeto.cantidad_camas }} cama{{ objeto.cantidad_camas|pluralize }}</span>
  </div>
  <div class="d-flex align-items-center">
    <i class="bi bi-people text-primary me-2"></i>
    <span>{{ objeto.cantidad_huespedes }} huesped{{ objeto.cantidad_huespedes|pluralize:"es" }}</span>
  </div>
  <div class="d-flex align-items-center">
    <i class="bi bi-calendar-range text-primary me-2"></i>
    <span>Mínimo {{ objeto.minimo_dias_alquiler }} noche{{ objeto.minimo_dias_alquiler|pluralize }}</span>
  </div>
  {% if objeto.inmueble %}
  <div class="d-flex align-items-center">
    <i class="bi bi-car-front text-primary me-2"></i>
    <span>inmueble</span>
  </div>
  {% endif %}
{% endblock %}

{% block precio_por %}noche{% endblock %}

{% block formulario_reserva %}
  <form method="post" action="{% url 'crear_reserva_inmueble' id_inmueble=objeto.id_inmueble %}">
    {% csrf_token %}
    <div class="mb-3">
      <label for="fecha_inicio" class="form-label">Fecha de llegada</label>
      <input type="text" class="form-control" id="fecha_inicio" name="fecha_inicio"
       value="{{ request.POST.fecha_inicio }}"
       required autocomplete="off">
    </div>
    <div class="mb-3">
      <label for="fecha_fin" class="form-label">Fecha de salida</label>
      <input type="text" class="form-control" id="fecha_fin" name="fecha_fin"
       value="{{ request.POST.fecha_fin }}"
       required autocomplete="off">
    </div>
    <div class="mb-3">
      <label for="cantidad_adultos" class="form-label">Cantidad de adultos</label>
      <input type="number" class="form-control" id="cantidad_adultos" name="cantidad_adultos" min="1" max="{{ objeto.cantidad_huespedes }}" required>
    </div>
    <div class="mb-3">
      <label for="cantidad_ninos" class="form-label">Cantidad de niños</label>
      <input type="number" class="form-control" id="cantidad_ninos" name="cantidad_ninos" min="0" max="{{ objeto.cantidad_huespedes }}" required>
    </div>
    <button type="submit" class="btn btn-primary btn-azul w-100 py-2">
      <i class="bi bi-calendar-check me-2"></i> Reservar ahora
    </button>
    <div id="django-messages" style="display: none;">
      {% if messages %}
        {% for message in messages %}
          <div class="django-message" data-tags="{{ message.tags }}" data-message="{{ message }}"></div>
        {% endfor %}
      {% endif %}
    </div>
  </form>
{% endblock %}